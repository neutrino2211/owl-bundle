{"id":"5vxr","dependencies":[{"name":"/home/tbranyen/git/diffhtml/packages/diffhtml/package.json","includedInParent":true,"mtime":1534977442154},{"name":"/home/tbranyen/git/diffhtml/packages/diffhtml/.babelrc","includedInParent":true,"mtime":1534634600429},{"name":"../util/caches","loc":{"line":1,"column":43},"parent":"/home/tbranyen/git/diffhtml/packages/diffhtml/lib/node/create.js","resolved":"/home/tbranyen/git/diffhtml/packages/diffhtml/lib/util/caches.js"},{"name":"../util/process","loc":{"line":2,"column":20},"parent":"/home/tbranyen/git/diffhtml/packages/diffhtml/lib/node/create.js","resolved":"/home/tbranyen/git/diffhtml/packages/diffhtml/lib/util/process.js"}],"generated":{"js":"\n\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=d;var e=require(\"../util/caches\"),r=require(\"../util/process\"),t=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var a=e.MiddlewareCache.CreateNodeHookCache,n=\"http://www.w3.org/2000/svg\";function d(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,o=arguments[2];if(!r)throw new Error(\"Missing VTree when trying to create DOM Node\");var i=e.NodeCache.get(r);if(i){if(i.nodeName.toLowerCase()!==r.nodeName)throw new Error(\"Shit is wrong\");return i}var c=r.nodeName,u=r.rawNodeName,l=void 0===u?c:u,s=r.childNodes,h=void 0===s?[]:s;o=o||\"svg\"===c;var v=null;a.forEach(function(e,t){(t=e(r))&&(v=t)}),v||(v=\"#text\"===c?t.createTextNode(r.nodeValue):\"#document-fragment\"===c?t.createDocumentFragment():o?t.createElementNS(n,l):t.createElement(l)),e.NodeCache.set(r,v);for(var w=0;w<h.length;w++)v.appendChild(d(h[w],t,o));return v}","map":{"mappings":[{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":0}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":13}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":20}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":35}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":43}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":56}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":57}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":64}},{"source":"node/create.js","name":"createNode","original":{"line":17,"column":24},"generated":{"line":2,"column":68}},{"source":"node/create.js","name":"createNode","original":{"line":17,"column":24},"generated":{"line":2,"column":76}},{"source":"node/create.js","name":"createNode","original":{"line":17,"column":24},"generated":{"line":2,"column":84}},{"source":"node/create.js","original":{"line":1,"column":0},"generated":{"line":2,"column":86}},{"source":"node/create.js","original":{"line":1,"column":0},"generated":{"line":2,"column":90}},{"source":"node/create.js","original":{"line":1,"column":0},"generated":{"line":2,"column":92}},{"source":"node/create.js","original":{"line":1,"column":0},"generated":{"line":2,"column":100}},{"source":"node/create.js","original":{"line":2,"column":0},"generated":{"line":2,"column":118}},{"source":"node/create.js","original":{"line":2,"column":0},"generated":{"line":2,"column":120}},{"source":"node/create.js","original":{"line":2,"column":0},"generated":{"line":2,"column":128}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":147}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":149}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":151}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":154}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":163}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":165}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":168}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":175}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":178}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":180}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":191}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":193}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":194}},{"source":"node/create.js","original":{"line":79,"column":1},"generated":{"line":2,"column":202}},{"source":"node/create.js","name":"CreateNodeHookCache","original":{"line":4,"column":8},"generated":{"line":2,"column":205}},{"source":"node/create.js","name":"CreateNodeHookCache","original":{"line":4,"column":8},"generated":{"line":2,"column":209}},{"source":"node/create.js","name":"MiddlewareCache","original":{"line":4,"column":32},"generated":{"line":2,"column":211}},{"source":"node/create.js","name":"CreateNodeHookCache","original":{"line":4,"column":8},"generated":{"line":2,"column":213}},{"source":"node/create.js","name":"CreateNodeHookCache","original":{"line":4,"column":8},"generated":{"line":2,"column":229}},{"source":"node/create.js","name":"namespace","original":{"line":5,"column":6},"generated":{"line":2,"column":249}},{"source":"node/create.js","original":{"line":5,"column":18},"generated":{"line":2,"column":251}},{"source":"node/create.js","original":{"line":17,"column":15},"generated":{"line":2,"column":280}},{"source":"node/create.js","name":"createNode","original":{"line":17,"column":24},"generated":{"line":2,"column":289}},{"source":"node/create.js","name":"vTree","original":{"line":17,"column":35},"generated":{"line":2,"column":291}},{"source":"node/create.js","name":"ownerDocument","original":{"line":17,"column":42},"generated":{"line":2,"column":294}},{"source":"node/create.js","name":"ownerDocument","original":{"line":17,"column":42},"generated":{"line":2,"column":298}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":300}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":310}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":317}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":325}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":329}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":339}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":342}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":352}},{"source":"node/create.js","name":"document","original":{"line":17,"column":58},"generated":{"line":2,"column":355}},{"source":"node/create.js","name":"isSVG","original":{"line":17,"column":68},"generated":{"line":2,"column":364}},{"source":"node/create.js","original":{"line":17,"column":75},"generated":{"line":2,"column":366}},{"source":"node/create.js","original":{"line":17,"column":75},"generated":{"line":2,"column":376}},{"source":"node/create.js","original":{"line":19,"column":8},"generated":{"line":2,"column":379}},{"source":"node/create.js","name":"vTree","original":{"line":19,"column":9},"generated":{"line":2,"column":383}},{"source":"node/create.js","original":{"line":20,"column":12},"generated":{"line":2,"column":385}},{"source":"node/create.js","original":{"line":20,"column":12},"generated":{"line":2,"column":391}},{"source":"node/create.js","name":"Error","original":{"line":20,"column":16},"generated":{"line":2,"column":395}},{"source":"node/create.js","original":{"line":20,"column":22},"generated":{"line":2,"column":401}},{"source":"node/create.js","name":"existingNode","original":{"line":24,"column":8},"generated":{"line":2,"column":449}},{"source":"node/create.js","name":"existingNode","original":{"line":24,"column":8},"generated":{"line":2,"column":453}},{"source":"node/create.js","name":"NodeCache","original":{"line":24,"column":23},"generated":{"line":2,"column":455}},{"source":"node/create.js","name":"get","original":{"line":24,"column":33},"generated":{"line":2,"column":457}},{"source":"node/create.js","name":"get","original":{"line":24,"column":33},"generated":{"line":2,"column":467}},{"source":"node/create.js","name":"vTree","original":{"line":24,"column":37},"generated":{"line":2,"column":471}},{"source":"node/create.js","name":"existingNode","original":{"line":27,"column":6},"generated":{"line":2,"column":474}},{"source":"node/create.js","name":"existingNode","original":{"line":27,"column":6},"generated":{"line":2,"column":477}},{"source":"node/create.js","original":{"line":27,"column":20},"generated":{"line":2,"column":479}},{"source":"node/create.js","name":"existingNode","original":{"line":28,"column":8},"generated":{"line":2,"column":480}},{"source":"node/create.js","name":"existingNode","original":{"line":28,"column":8},"generated":{"line":2,"column":483}},{"source":"node/create.js","name":"nodeName","original":{"line":28,"column":21},"generated":{"line":2,"column":485}},{"source":"node/create.js","name":"toLowerCase","original":{"line":28,"column":30},"generated":{"line":2,"column":494}},{"source":"node/create.js","name":"vTree","original":{"line":28,"column":48},"generated":{"line":2,"column":510}},{"source":"node/create.js","name":"nodeName","original":{"line":28,"column":54},"generated":{"line":2,"column":512}},{"source":"node/create.js","original":{"line":29,"column":12},"generated":{"line":2,"column":521}},{"source":"node/create.js","original":{"line":29,"column":12},"generated":{"line":2,"column":527}},{"source":"node/create.js","name":"Error","original":{"line":29,"column":16},"generated":{"line":2,"column":531}},{"source":"node/create.js","original":{"line":29,"column":22},"generated":{"line":2,"column":537}},{"source":"node/create.js","name":"existingNode","original":{"line":32,"column":11},"generated":{"line":2,"column":554}},{"source":"node/create.js","name":"existingNode","original":{"line":32,"column":11},"generated":{"line":2,"column":561}},{"source":"node/create.js","name":"nodeName","original":{"line":35,"column":10},"generated":{"line":2,"column":563}},{"source":"node/create.js","name":"nodeName","original":{"line":35,"column":10},"generated":{"line":2,"column":567}},{"source":"node/create.js","name":"vTree","original":{"line":35,"column":64},"generated":{"line":2,"column":569}},{"source":"node/create.js","name":"nodeName","original":{"line":35,"column":10},"generated":{"line":2,"column":571}},{"source":"node/create.js","name":"vTree","original":{"line":35,"column":64},"generated":{"line":2,"column":580}},{"source":"node/create.js","name":"vTree","original":{"line":35,"column":64},"generated":{"line":2,"column":582}},{"source":"node/create.js","name":"rawNodeName","original":{"line":35,"column":20},"generated":{"line":2,"column":584}},{"source":"node/create.js","name":"rawNodeName","original":{"line":35,"column":20},"generated":{"line":2,"column":596}},{"source":"node/create.js","name":"nodeName","original":{"line":35,"column":34},"generated":{"line":2,"column":603}},{"source":"node/create.js","name":"nodeName","original":{"line":35,"column":34},"generated":{"line":2,"column":607}},{"source":"node/create.js","name":"nodeName","original":{"line":35,"column":34},"generated":{"line":2,"column":609}},{"source":"node/create.js","original":{"line":17,"column":75},"generated":{"line":2,"column":611}},{"source":"node/create.js","name":"vTree","original":{"line":35,"column":64},"generated":{"line":2,"column":613}},{"source":"node/create.js","name":"vTree","original":{"line":35,"column":64},"generated":{"line":2,"column":615}},{"source":"node/create.js","name":"childNodes","original":{"line":35,"column":44},"generated":{"line":2,"column":617}},{"source":"node/create.js","name":"childNodes","original":{"line":35,"column":44},"generated":{"line":2,"column":628}},{"source":"node/create.js","original":{"line":35,"column":57},"generated":{"line":2,"column":635}},{"source":"node/create.js","original":{"line":35,"column":57},"generated":{"line":2,"column":639}},{"source":"node/create.js","original":{"line":35,"column":57},"generated":{"line":2,"column":641}},{"source":"node/create.js","original":{"line":17,"column":75},"generated":{"line":2,"column":644}},{"source":"node/create.js","name":"isSVG","original":{"line":36,"column":10},"generated":{"line":2,"column":646}},{"source":"node/create.js","name":"isSVG","original":{"line":36,"column":10},"generated":{"line":2,"column":648}},{"source":"node/create.js","original":{"line":36,"column":32},"generated":{"line":2,"column":651}},{"source":"node/create.js","name":"nodeName","original":{"line":36,"column":19},"generated":{"line":2,"column":659}},{"source":"node/create.js","name":"domNode","original":{"line":39,"column":6},"generated":{"line":2,"column":661}},{"source":"node/create.js","name":"domNode","original":{"line":39,"column":6},"generated":{"line":2,"column":665}},{"source":"node/create.js","original":{"line":39,"column":16},"generated":{"line":2,"column":667}},{"source":"node/create.js","name":"forEach","original":{"line":41,"column":22},"generated":{"line":2,"column":672}},{"source":"node/create.js","name":"forEach","original":{"line":41,"column":22},"generated":{"line":2,"column":674}},{"source":"node/create.js","original":{"line":41,"column":30},"generated":{"line":2,"column":682}},{"source":"node/create.js","name":"fn","original":{"line":41,"column":31},"generated":{"line":2,"column":691}},{"source":"node/create.js","name":"retVal","original":{"line":41,"column":35},"generated":{"line":2,"column":693}},{"source":"node/create.js","name":"retVal","original":{"line":44,"column":8},"generated":{"line":2,"column":697}},{"source":"node/create.js","name":"fn","original":{"line":44,"column":17},"generated":{"line":2,"column":699}},{"source":"node/create.js","name":"vTree","original":{"line":44,"column":20},"generated":{"line":2,"column":701}},{"source":"node/create.js","name":"retVal","original":{"line":45,"column":16},"generated":{"line":2,"column":707}},{"source":"node/create.js","name":"retVal","original":{"line":45,"column":16},"generated":{"line":2,"column":709}},{"source":"node/create.js","name":"domNode","original":{"line":49,"column":7},"generated":{"line":2,"column":714}},{"source":"node/create.js","name":"ownerDocument","original":{"line":53,"column":16},"generated":{"line":2,"column":718}},{"source":"node/create.js","original":{"line":52,"column":21},"generated":{"line":2,"column":720}},{"source":"node/create.js","name":"nodeName","original":{"line":52,"column":8},"generated":{"line":2,"column":730}},{"source":"node/create.js","name":"ownerDocument","original":{"line":53,"column":16},"generated":{"line":2,"column":732}},{"source":"node/create.js","name":"createTextNode","original":{"line":53,"column":30},"generated":{"line":2,"column":734}},{"source":"node/create.js","name":"vTree","original":{"line":53,"column":45},"generated":{"line":2,"column":749}},{"source":"node/create.js","name":"nodeValue","original":{"line":53,"column":51},"generated":{"line":2,"column":751}},{"source":"node/create.js","original":{"line":56,"column":26},"generated":{"line":2,"column":762}},{"source":"node/create.js","name":"nodeName","original":{"line":56,"column":13},"generated":{"line":2,"column":785}},{"source":"node/create.js","name":"ownerDocument","original":{"line":57,"column":16},"generated":{"line":2,"column":787}},{"source":"node/create.js","name":"createDocumentFragment","original":{"line":57,"column":30},"generated":{"line":2,"column":789}},{"source":"node/create.js","name":"isSVG","original":{"line":60,"column":13},"generated":{"line":2,"column":814}},{"source":"node/create.js","name":"ownerDocument","original":{"line":61,"column":16},"generated":{"line":2,"column":816}},{"source":"node/create.js","name":"createElementNS","original":{"line":61,"column":30},"generated":{"line":2,"column":818}},{"source":"node/create.js","name":"namespace","original":{"line":61,"column":46},"generated":{"line":2,"column":834}},{"source":"node/create.js","name":"rawNodeName","original":{"line":61,"column":57},"generated":{"line":2,"column":836}},{"source":"node/create.js","name":"ownerDocument","original":{"line":65,"column":16},"generated":{"line":2,"column":839}},{"source":"node/create.js","name":"createElement","original":{"line":65,"column":30},"generated":{"line":2,"column":841}},{"source":"node/create.js","name":"rawNodeName","original":{"line":65,"column":44},"generated":{"line":2,"column":855}},{"source":"node/create.js","name":"set","original":{"line":70,"column":12},"generated":{"line":2,"column":859}},{"source":"node/create.js","name":"set","original":{"line":70,"column":12},"generated":{"line":2,"column":861}},{"source":"node/create.js","name":"set","original":{"line":70,"column":12},"generated":{"line":2,"column":871}},{"source":"node/create.js","name":"vTree","original":{"line":70,"column":16},"generated":{"line":2,"column":875}},{"source":"node/create.js","name":"domNode","original":{"line":70,"column":23},"generated":{"line":2,"column":877}},{"source":"node/create.js","original":{"line":74,"column":7},"generated":{"line":2,"column":880}},{"source":"node/create.js","original":{"line":74,"column":7},"generated":{"line":2,"column":884}},{"source":"node/create.js","name":"i","original":{"line":74,"column":11},"generated":{"line":2,"column":888}},{"source":"node/create.js","original":{"line":74,"column":15},"generated":{"line":2,"column":890}},{"source":"node/create.js","name":"i","original":{"line":74,"column":18},"generated":{"line":2,"column":892}},{"source":"node/create.js","name":"childNodes","original":{"line":74,"column":22},"generated":{"line":2,"column":894}},{"source":"node/create.js","name":"length","original":{"line":74,"column":33},"generated":{"line":2,"column":896}},{"source":"node/create.js","name":"i","original":{"line":74,"column":41},"generated":{"line":2,"column":903}},{"source":"node/create.js","name":"appendChild","original":{"line":75,"column":12},"generated":{"line":2,"column":907}},{"source":"node/create.js","name":"appendChild","original":{"line":75,"column":12},"generated":{"line":2,"column":909}},{"source":"node/create.js","name":"createNode","original":{"line":75,"column":24},"generated":{"line":2,"column":921}},{"source":"node/create.js","name":"childNodes","original":{"line":75,"column":35},"generated":{"line":2,"column":923}},{"source":"node/create.js","name":"i","original":{"line":75,"column":46},"generated":{"line":2,"column":925}},{"source":"node/create.js","name":"ownerDocument","original":{"line":75,"column":50},"generated":{"line":2,"column":928}},{"source":"node/create.js","name":"isSVG","original":{"line":75,"column":65},"generated":{"line":2,"column":930}},{"source":"node/create.js","name":"domNode","original":{"line":78,"column":9},"generated":{"line":2,"column":934}},{"source":"node/create.js","name":"domNode","original":{"line":78,"column":9},"generated":{"line":2,"column":941}}],"sources":{"node/create.js":"import { NodeCache, MiddlewareCache } from '../util/caches';\nimport process from '../util/process';\n\nconst { CreateNodeHookCache } = MiddlewareCache;\nconst namespace = 'http://www.w3.org/2000/svg';\n\n/**\n * Takes in a Virtual Tree Element (VTree) and creates a DOM Node from it.\n * Sets the node into the Node cache. If this VTree already has an\n * associated node, it will reuse that.\n *\n * @param {Object} - A Virtual Tree Element or VTree-like element\n * @param {Object} - Document to create Nodes in\n * @param {Boolean} - Is their a root SVG element?\n * @return {Object} - A DOM Node matching the vTree\n */\nexport default function createNode(vTree, ownerDocument = document, isSVG) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!vTree) {\n      throw new Error('Missing VTree when trying to create DOM Node');\n    }\n  }\n\n  const existingNode = NodeCache.get(vTree);\n\n  // If the DOM Node was already created, reuse the existing node.\n  if (existingNode) {\n    if (existingNode.nodeName.toLowerCase() !== vTree.nodeName) {\n      throw new Error('Shit is wrong');\n    }\n\n    return existingNode;\n  }\n\n  const { nodeName, rawNodeName = nodeName, childNodes = [] } = vTree;\n  isSVG = isSVG || nodeName === 'svg';\n\n  // Will vary based on the properties of the VTree.\n  let domNode = null;\n\n  CreateNodeHookCache.forEach((fn, retVal) => {\n    // Invoke all the `createNodeHook` functions passing along the vTree as the\n    // only argument. These functions must return a valid DOM Node value.\n    if (retVal = fn(vTree)) {\n      domNode = retVal;\n    }\n  });\n\n  if (!domNode) {\n    // Create empty text elements. They will get filled in during the patch\n    // process.\n    if (nodeName === '#text') {\n      domNode = ownerDocument.createTextNode(vTree.nodeValue);\n    }\n    // Support dynamically creating document fragments.\n    else if (nodeName === '#document-fragment') {\n      domNode = ownerDocument.createDocumentFragment();\n    }\n    // Support SVG.\n    else if (isSVG) {\n      domNode = ownerDocument.createElementNS(namespace, rawNodeName);\n    }\n    // If not a Text or SVG Node, then create with the standard method.\n    else {\n      domNode = ownerDocument.createElement(rawNodeName);\n    }\n  }\n\n  // Add to the domNodes cache.\n  NodeCache.set(vTree, domNode);\n\n  // Append all the children into the domNode, making sure to run them\n  // through this `createNode` function as well.\n  for (let i = 0; i < childNodes.length; i++) {\n    domNode.appendChild(createNode(childNodes[i], ownerDocument, isSVG));\n  }\n\n  return domNode;\n}\n"},"lineCount":null}},"hash":"fa06a0e2a2bbadcf038672b84ff3a045","cacheData":{"env":{"NODE_ENV":"development"}}}